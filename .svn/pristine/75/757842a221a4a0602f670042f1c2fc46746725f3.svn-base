- Need a func to write patch data back into file, to verify the averaging routine works. Done!
- have a smoothness constraint on the gmm, too. (MRF? and ICM)
- have a parameter for the number of neighbors. Now it seems 6 neithbors give square shapes of the region.  Done!
-- optimal gamma? from user input?
-- a obj fun for both em and graphcuts? Done!
-- Re-write with lemon graph such that gmm have MRF prior. Done.
-- Study the hierarchical model that also have alpha as variable.
-- confidence of the atlas prior: dichelet?
-- write out prior to check it looks good. 
-- need a routine to convert 4d probability to 3d label map. 
-- The patches shape may have information to make decision if this is a good candidate of lesion. If it's round (small ratio of boundary/area), it's probably a good candidate.



-- write a 'maskpathces' routine take patches image and mask image as input, and output masked image. 
